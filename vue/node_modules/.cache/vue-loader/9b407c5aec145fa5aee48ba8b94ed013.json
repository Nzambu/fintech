{"remainingRequest":"/var/www/html/teal/vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/html/teal/vue/src/components/AppBar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/html/teal/vue/src/components/AppBar.vue","mtime":1613053095604},{"path":"/var/www/html/teal/vue/node_modules/cache-loader/dist/cjs.js","mtime":1612338812780},{"path":"/var/www/html/teal/vue/node_modules/babel-loader/lib/index.js","mtime":1612338812660},{"path":"/var/www/html/teal/vue/node_modules/cache-loader/dist/cjs.js","mtime":1612338812780},{"path":"/var/www/html/teal/vue/node_modules/vue-loader/lib/index.js","mtime":1612338817168}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBEaWFsb2cgZnJvbSAnLi9EaWFsb2cnCi8vIGltcG9ydCBTaWRlYmFyIGZyb20gJy4vU2lkZWJhcicKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ0FwcEJhcicsCiAgICBwcm9wZXJ0eU5hbWUgOiAnJywKICAgIGRhdGEgKCkgewogICAgICByZXR1cm4gewogICAgICAgIG1pbmkgOiBmYWxzZSwKICAgICAgICBwcm9wZXJ0eSA6ICcnCiAgICAgIH0KICAgIH0sCiAgICBjb21wdXRlZCA6IHsKICAgICAgbG9jYXRpb24oKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHJvdXRlLm1ldGEubmFtZQogICAgICB9LCAKICAgICAgcHJvcGVydHlMaXN0KCkgewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5wcm9wZXJ0eS5saXN0CiAgICAgIH0sCiAgICAgIHByb3BlcnR5SUQoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnByb3BlcnR5Lmxpc3RbMF0KICAgICAgfSwKICAgICAgZmlyc3RQcm9wZXJ0eSgpIHsKICAgICAgICByZXR1cm4gdGhpcy5wcm9wZXJ0eUxpc3RbMF0KICAgICAgfSwKICAgICAgZ2V0U2VsZWN0ZWRQcm9wZXJ0eSgpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUucHJvcGVydHkuc2VsZWN0ZWQgPz8gbnVsbAogICAgICB9CiAgICB9LAogICAgd2F0Y2ggOiB7CiAgICAgIGdldFNlbGVjdGVkUHJvcGVydHkobmV3R2V0U2VsZWN0ZWRQcm9wZXJ0eSwgb2xkR2V0U2VsZWN0ZWRQcm9wZXJ0eSkgewogICAgICAgIGlmKG5ld0dldFNlbGVjdGVkUHJvcGVydHkgIT09IG9sZEdldFNlbGVjdGVkUHJvcGVydHkpIHsKICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgICAgdGhpcy5nZXRQcm9wZXJ0eVVuaXRzKCkKICAgICAgICAgICAgdGhpcy5nZXRQcm9wZXJ0eVRlbmFudHMoKQogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVkKCkgIHsKICAgICAgLy8gY29uc29sZS5sb2codGhpcy4kcm91dGUubWV0YS5uYW1lKTsKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIHRoaXMuaGFuZGxlR2V0T3duZXJQcm9wZXJ0eSgpCiAgICAgICAgLy8gdGhpcy5zZWxlY3RlZFByb3BlcnR5KCkKICAgICAgfSkKICAgIH0sCiAgICBjb21wb25lbnRzIDogewogICAgICAgIERpYWxvZywKICAgICAgICAvLyBTaWRlYmFyCiAgICB9LAogICAgbWV0aG9kcyA6IHsKICAgICAgCiAgICAgIC8qKgogICAgICAgKiBTZXQgbWluaSBzaWRlYmFyCiAgICAgICAqLwogICAgICBtaW5pU2lkZWJhcigpIHsKICAgICAgICB0aGlzLm1pbmkgPSAhdGhpcy5taW5pCiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NldHRpbmdzL21pbmlTaWRlYmFyJywgdGhpcy5taW5pKS50aGVuKAogICAgICAgICAgc2V0ID0+IHsKICAgICAgICAgICAgaWYoc2V0ID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnNldHRpbmdzLm1pbmlTaWRlYmFyCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICApCiAgICAgIH0sCgogICAgICAvKioKICAgICAgICogQXZhaWFsYWJsZSBvd25lciBwcm9wZXJ0eQogICAgICAgKi8KICAgICAgaGFuZGxlR2V0T3duZXJQcm9wZXJ0eSgpCiAgICAgIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3Byb3BlcnR5L2xpc3QnKS50aGVuKAogICAgICAgICAgZmVlZGJhY2sgPT4gewogICAgICAgICAgICBpZihmZWVkYmFjay5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFByb3BlcnR5KCkKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICkKICAgICAgfSwKICAgICAgCiAgICAgIHNlbGVjdFByb3BlcnR5KHByb3BlcnR5KSB7CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3Byb3BlcnR5L3NlbGVjdGVkJywgcHJvcGVydHkpLnRoZW4oCiAgICAgICAgICBzZWxlY3RlZCA9PiB7CiAgICAgICAgICAgIGlmKHNlbGVjdGVkKSB7CiAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFByb3BlcnR5KCkKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICkKICAgICAgICAKICAgICAgfSwKCiAgICAgIGV4dHJhY3RQcm9wZXJ0eU5hbWUocHJvcGVydHkpIHsKICAgICAgICByZXR1cm4gcHJvcGVydHkuYXR0cmlidXRlcy5uYW1lCiAgICAgIH0sCgogICAgICAvKioKICAgICAgICogU2VsZWN0ZWQgcHJvcGVydHkKICAgICAgICovCiAgICAgIHNlbGVjdGVkUHJvcGVydHkoKSB7CiAgICAgICAgbGV0IHNlbGVjdGVkID0gdGhpcy5nZXRTZWxlY3RlZFByb3BlcnR5CiAgICAgICAgdGhpcy5wcm9wZXJ0eSA9IChzZWxlY3RlZCAhPT0gJycpID8gc2VsZWN0ZWQuYXR0cmlidXRlcy5uYW1lIDogdGhpcy5maXJzdFByb3BlcnR5LmF0dHJpYnV0ZXMubmFtZQogICAgICB9LAoKICAgICAgIC8qKgogICAgICAgKiBHZXQgc2VsZWN0ZWQgcHJvcGVydHkgaWQKICAgICAgICovCiAgICAgIGdldFByb3BlcnR5VW5pdHMoKSAKICAgICAgewogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd1bml0L2xpc3QnLCB0aGlzLmdldFNlbGVjdGVkUHJvcGVydHkuaWQpLnRoZW4oCiAgICAgICAgICAgIGZlZWRiYWNrID0+IHsKICAgICAgICAgICAgICAgIGxldCBzdGF0dXMgPSBmZWVkYmFjay5zdGF0dXMKICAgICAgICAgICAgICAgIGlmKHN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy51bml0TGlzdCA9IGZlZWRiYWNrLmRhdGE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZhaWwgPT4gewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZmFpbC5yZXNwb25zZS5kYXRhKQogICAgICAgICAgICB9CiAgICAgICAgKQogICAgICB9LAoKICAgICAgLyoqCiAgICAgICAqIEdldCBzZWxlY3RlZCBwcm9wZXJ0eSBpZAogICAgICAgKi8KICAgICAgZ2V0UHJvcGVydHlUZW5hbnRzKCkgCiAgICAgIHsKICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd0ZW5hbnQvbGlzdCcsIHRoaXMuZ2V0U2VsZWN0ZWRQcm9wZXJ0eS5pZCkudGhlbigKICAgICAgICAgICAgICBmZWVkYmFjayA9PiB7CiAgICAgICAgICAgICAgICAgIGxldCBzdGF0dXMgPSBmZWVkYmFjay5zdGF0dXMKICAgICAgICAgICAgICAgICAgaWYoc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGVuYW50TGlzdCA9IGZlZWRiYWNrLmRhdGE7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGZhaWwgPT4gewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhmYWlsLnJlc3BvbnNlLmRhdGEpCiAgICAgICAgICAgICAgfQogICAgICAgICAgKQogICAgICB9LAogICAgfQp9Cg=="},{"version":3,"sources":["AppBar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AppBar.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <v-app-bar app color=\"light\" clipped-left>\n      <v-app-bar-nav-icon @click.stop=\"miniSidebar\"></v-app-bar-nav-icon>\n      <v-row>\n          <v-col lg=\"4\">\n            <v-list-item One-line>\n                <v-list-item-content>\n                    <v-list-item-subtitle>\n                      {{ location }}\n                    </v-list-item-subtitle>\n                </v-list-item-content>\n            </v-list-item>         \n          </v-col>\n          <v-col lg=\"4\">\n            <div class=\"\">\n              <v-menu offset-y>\n                <template v-slot:activator=\"{ on, attrs }\">\n                  <v-list-item One-line v-bind=\"attrs\" v-on=\"on\">\n                      <v-list-item-content>\n                          <v-list-item-subtitle>{{ property }} \n                            <v-icon\n                              color=\"grey\"\n                              v-bind=\"attrs\"\n                              v-on=\"on\"\n                            >\n                              mdi-arrow-down\n                              <!-- mdi-expand-more -->\n                            </v-icon>    \n                          </v-list-item-subtitle>\n                      </v-list-item-content>\n                  </v-list-item> \n                </template>\n                <v-list>\n                  <v-list-item\n                    v-for=\"(item, index) in propertyList\"\n                    :key=\"index\"\n                    @click=\"selectProperty(item)\"\n                  >\n                    <v-list-item-title>{{ extractPropertyName(item) }}</v-list-item-title>\n                  </v-list-item>\n                </v-list>\n              </v-menu>\n            </div>\n          </v-col>        \n      </v-row>\n      <v-spacer></v-spacer>\n      <v-btn icon class=\"mr-1\">\n        <!-- <v-avatar>\n          <v-img src=\"https://gitlab.com/uploads/-/system/user/avatar/3883365/avatar.png\"></v-img>\n        </v-avatar> -->\n        <Dialog/>\n      </v-btn>\n      <!-- <v-btn icon class=\"mr-1\"> \n      </v-btn> -->\n    </v-app-bar>\n  </div>  \n</template>\n<script>\nimport Dialog from './Dialog'\n// import Sidebar from './Sidebar'\nexport default {\n    name: 'AppBar',\n    propertyName : '',\n    data () {\n      return {\n        mini : false,\n        property : ''\n      }\n    },\n    computed : {\n      location() {\n        return this.$route.meta.name\n      }, \n      propertyList() {\n        return this.$store.state.property.list\n      },\n      propertyID() {\n        return this.$store.state.property.list[0]\n      },\n      firstProperty() {\n        return this.propertyList[0]\n      },\n      getSelectedProperty() {\n        return this.$store.state.property.selected ?? null\n      }\n    },\n    watch : {\n      getSelectedProperty(newGetSelectedProperty, oldGetSelectedProperty) {\n        if(newGetSelectedProperty !== oldGetSelectedProperty) {\n          this.$nextTick(() => {\n            this.getPropertyUnits()\n            this.getPropertyTenants()\n          })\n        }\n      }\n    },\n    created()  {\n      // console.log(this.$route.meta.name);\n      this.$nextTick(() => {\n        this.handleGetOwnerProperty()\n        // this.selectedProperty()\n      })\n    },\n    components : {\n        Dialog,\n        // Sidebar\n    },\n    methods : {\n      \n      /**\n       * Set mini sidebar\n       */\n      miniSidebar() {\n        this.mini = !this.mini\n        this.$store.dispatch('settings/miniSidebar', this.mini).then(\n          set => {\n            if(set === true) {\n               this.$store.state.settings.miniSidebar\n            }\n          }\n        )\n      },\n\n      /**\n       * Avaialable owner property\n       */\n      handleGetOwnerProperty()\n      {\n        return this.$store.dispatch('property/list').then(\n          feedback => {\n            if(feedback.status == 200) {\n              this.selectedProperty()\n            }\n          }\n        )\n      },\n      \n      selectProperty(property) {\n        this.$store.dispatch('property/selected', property).then(\n          selected => {\n            if(selected) {\n              this.selectedProperty()\n            }\n          }\n        )\n        \n      },\n\n      extractPropertyName(property) {\n        return property.attributes.name\n      },\n\n      /**\n       * Selected property\n       */\n      selectedProperty() {\n        let selected = this.getSelectedProperty\n        this.property = (selected !== '') ? selected.attributes.name : this.firstProperty.attributes.name\n      },\n\n       /**\n       * Get selected property id\n       */\n      getPropertyUnits() \n      {\n        this.$store.dispatch('unit/list', this.getSelectedProperty.id).then(\n            feedback => {\n                let status = feedback.status\n                if(status === 200) {\n                    this.unitList = feedback.data;\n                }\n            },\n            fail => {\n                console.log(fail.response.data)\n            }\n        )\n      },\n\n      /**\n       * Get selected property id\n       */\n      getPropertyTenants() \n      {\n          this.$store.dispatch('tenant/list', this.getSelectedProperty.id).then(\n              feedback => {\n                  let status = feedback.status\n                  if(status === 200) {\n                      this.tenantList = feedback.data;\n                  }\n              },\n              fail => {\n                  console.log(fail.response.data)\n              }\n          )\n      },\n    }\n}\n</script>"]}]}